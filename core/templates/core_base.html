{% block doc -%}
<html {% block html_attribs %}class="cui" {% endblock html_attribs %}>
    {%- block html %}

    <head>
        {%- block head %}
        {%- block metas %}
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- This is for Bootstrap 3: <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        {%- endblock metas %}
        <link rel="icon" href="/core/static/icons/cisco-icon.ico">
        <title>{{lab_data.cl_id}}</title>
        <script type="text/javascript" src="/core/static/js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="/core/static/js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="/core/static/js/prism.js"></script>
        <script type="text/javascript" src="/core/static/js/file-tree.min.js"></script>
        <script type="text/javascript" src="/core/static/js/clipboard.min.js"></script>
        <!-- <script type="text/javascript" src="/static/js/easyTree.js"></script> -->
        <script type="text/javascript" src="/core/static/js/lodash.min.js"></script>
        <script type="text/javascript" src="/core/static/js/select2.full.min.js"></script>
        {%- block styles %}
        <link href="/core/static/css/prism.css" rel="stylesheet">
        <link href="/core/static/css/file-tree.min.css" rel="stylesheet">
        <link href="/core/static/font-awesome/css/all.min.css" rel="stylesheet">
        <link href="/core/static/css/bootstrap.min.css" rel="stylesheet">
        <link href="/core/static/css/fonts.css" rel="stylesheet">
        <link href="/core/static/css/cui-standard.min.css" rel="stylesheet">
        <link href="/core/static/css/easyTree.css" rel="stylesheet">
        <link href="/core/static/css/select2.min.css" rel="stylesheet">
        <link href="/core/static/css/select2-bootstrap.min.css" rel="stylesheet">
        <!-- This always needs to be last. This is autogenerated by SASS -->
        <link href="/core/static/css/ciscolive.css?{{ cache_kill }}" rel="stylesheet">
        {%- endblock styles %}
        {%- endblock head %}
    </head>

    <body {% if pod != 0 %} class="cui" {% endif %} {% block body_attribs %}{% endblock body_attribs %} {% if pod ==0 %}
        style="margin:0; padding:0; background-color: #00263A;" {% endif %}>
        {% block body -%}
        {% if pod !=0 %}
        <div id="wrapper" class="toggled">
            <header class="header">
                <div class="header_inside_image">
                    <div class="header-bar container">
                        <a class="btn btn--small btn--icon toggle-menu menu-toggle-icon" style="background-color:white;">
                            <span class="icon-list-menu"></span>
                        </a>
                        <a class="header-bar__logo">
                            <span class="icon-cisco"></span>
                            <!-- <img src="/lab/static/images/market/cisco-live-grey.png"> -->
                        </a>
                        <div class="header-bar__main">
                            <div class="header-breadcrumbs">
                                <ul class="breadcrumb">
                                    <li><a href="/">{{lab_data.cl_id}}</a></li>
                                    <li><a href="/lab/pod{{ pod }}">POD{{ pod }}</a></li>
                                    <li>{{ section }}</li>
                                    <li><i onclick="window.open('/lab/extract/pod{{ pod }}/{{ section }}/{{ chapter }}');" style="float:right;"
                                            class="fas fa-wrench"></i></li>
                                </ul>
                            </div>
                            <div class="header-heading">
                                <h1 class="page-title">{{ title }}</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            {% if data.credential_popover_show is sameas true %}
            <div class="credentials">
                <button type="button" title="Lab&nbsp;Credentials" class="btn btn--small" data-placement="bottom" data-container="body" data-html="true"
                    data-sanitize="false" data-toggle="popover" data-content="{{data.credential_popover_data}}">
                    <i class="fas fa-lock"></i>&nbsp;Credentials
                </button>
                <div id='credentials_id'></div>
            </div>
            {% endif %}
            <!-- Sidebar -->
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <div class="sidebar-header">
                        <div class="sidebar-header-toolbar" style="padding-left:10px;">
                            <button class="btn btn--icon btn--primary">
                                <a href="/"><i class="fa fa-home"></i></span></a>
                            </button>
                            <button class="btn btn--icon btn--primary">
                                <a href="{{data.lab_preso_url}}" style="color:white;">
                                    <i class="fas fa-tv" aria-hidden="true"></i>
                                </a>
                            </button>
                            <button class="btn btn--icon btn--primary">
                                <a href="/pod{{ data.pod_id }}/print" style="color:white;">
                                    <i class="fas fa-print" aria-hidden="true"></i>
                                </a>
                            </button>
                            <button class="btn btn--icon btn--primary">
                                <a style="color:white;" target="blank" data-toggle="modal" data-target="#about1234" href="#">
                                    <i class="fas fa-info-circle"></i>
                                </a>
                            </button>
                            <button class="btn btn--icon btn--primary">
                                <i class="fas fa-times-circle menu-toggle-icon"></i>
                            </button>
                        </div>
                        <div class="sidebar-header-divisor"></div>
                    </div>
                    <!--
                    Start loop for menu. Read from the Python routefunc.py to actually build everythign here. The
                    structure is done so that this doesn't have to be edited every time a section is added. It just
                    reads that dictionary and builds everything in one shot.
                 -->
                    {% for list_section in ordered_section_list %}
                    <li data-toggle="collapse" data-target="#sm-{{ list_section }}" class="active collapsed">
                        <a href="#"><i class="fas fa-folder"></i>{{ unordered_menu[list_section]['head']['title'] }}</a>
                        <ul class="sub-menu collapse {% if section==list_section %}show {% else %} {% endif %}" id="sm-{{ list_section }}">
                            {% for menu_list in menu[list_section] %}
                            {% if menu_list.line == "sep" %}
                            <li class="divider"></li>
                            {% elif menu_list.line == "data" %}
                            <li class="{% if menu_list['weburl']==chapter %} at_this_location {% else %} {% endif %}">
                                <a href="/lab/pod{{ pod }}/{{ list_section }}/{{ menu_list.weburl }}">
                                    <i class="fas fa-file-alt"></i>
                                    {{ menu_list.title[:28] }}
                                </a>
                            </li>
                            {% endif  %}
                            {% endfor %}
                        </ul>
                    </li>
                    <div class="menudivisor"></div>
                    {% endfor %}
            </div>
            {% endif %}
            <!-- /#sidebar-wrapper -->

            {% if pod !=0 %}
            <div id="page-content-wrapper">
                <div class="container" id="block-content">
                    {% else %}
                    <div>
                        <!-- leaving this here just in case -->
                        {% endif %}
                        {% block content %}
                        {% endblock %}
                    </div>
                    {% if pod !=0 %}
                </div>
                {% endif %}

            </div>

            {% if pod !=0 %}
            <footer class="footer footer--new">
                <div class="footer__links">
                    <ul class="list">
                        <!--
                            This is read from the YAML file for footer urls. Just add the URL data to the
                            YAML file that will be read and processed here.
                        -->
                        {% for url in footer_urls  %}
                        <li><i style='font-size:.9em; color:orange' class="fas fa-external-link-square-alt"></i>&nbsp;<a href='{{url.url}}'
                                target='{{url.target}}'>{{url.text}}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="footer__legal">
                    <div class="footer__logo">
                        <a href="http://www.cisco.com" target="_blank">
                            <span class="icon-cisco"></span>
                        </a>
                    </div>
                    <div class="footer__copyright">
                        <div>Copyright &copy; 2020 Cisco Systems Inc.</div>
                        <div>All rights reserved.</div>
                    </div>
                </div>
            </footer>
            {% endif %}

        </div>

        <div class="modal fade" id="about1234" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">{{lab_data.cl_id}} - {{lab_data.cl_title}}</h4>
                        <button type="button btn-large" class="close float-right" style="z-index: 9999;" data-dismiss="modal" data-target="#about1234" aria-label="Close">
                            <span aria-hidden="true">&times</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <p style="text-align:left;">
                                    {{lab_data.cl_abstract}}
                                </p>
                            </div>
                        </div>
                        <div class="row">

                        </div>
                        <div class="row" style="margin-top:20px;">
                            <div class="col-lg-6 col-sm-12">
                                <strong>Raj Chacko</strong><br>
                                Technical Solutions Consultant <br>
                                rajchack@cisco.com<br>
                                <br>
                            </div>
                            <div class="col-lg-6 col-sm-12">
                                <strong>Justin Barksdale</strong><br>
                                Technical Solutions Engineer <br>
                                jusbarks@cisco.com<br>
                                <br>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-target="#about1234" style="margin-top:20px;">Close</button>
                    </div>
                </div>
            </div>
        </div>


        {%- endblock body %}
    </body>

    {% block scripts %}

    <script type="text/javascript">
        var urlParams;
        (window.onpopstate = function () {
            var match,
                pl = /\+/g, // Regex for replacing addition symbol with a space
                search = /([^&=]+)=?([^&]*)/g,
                decode = function (s) {
                    return decodeURIComponent(s.replace(pl, " "));
                },
                query = window.location.search.substring(1);

            urlParams = {};
            while (match = search.exec(query))
                urlParams[decode(match[1])] = decode(match[2]);
        })();

        Prism.plugins.NormalizeWhitespace.setDefaults({
            'remove-indent': false,
            'left-trim': true,
            'right-trim': false,
            'remove-initial-line-feed': true,
            /*'break-lines': 80,
            'indent': 2,
            'remove-initial-line-feed': false,
            'tabs-to-spaces': 4,
            'spaces-to-tabs': 4*/
        });



        $(document).ready(function () {


            // cache the window object
            $window = $(window);
            $(function () {
                $('[data-toggle="popover"]').popover({
                    sanitizeFn: function (content) {
                        return content
                    }
                });
            });

            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            })

            $(".menu-toggle-icon").click(function (e) {
                //e.preventDefault();
                $("#wrapper").toggleClass("toggled");
            });

            $('.sidebar-nav li').click(function (event) {
                var icon_element = $(event.target).find('i');
                if (icon_element[0].classList.contains('fa-folder')) {
                    $(icon_element).removeClass('fas fa-folder').addClass('fas fa-folder-open');
                } else {
                    $(icon_element).removeClass('fas fa-folder-open').addClass('fas fa-folder');
                }
            });

            new ClipboardJS('.copyme');


            function add_copy(parentID) {
                var x = document.getElementsByClassName(parentID);
                var i;
                for (i = 0; i < x.length; i++) {
                    //console.log(x)
                    var newbutton = document.createElement("button")
                    newbutton.classList.add("copy-button")
                    //newbutton.innerHTML = "Copy"
                    x[i].appendChild(newbutton)
                }
            }

            add_copy("fancy-terminal");

            var clipboard = new ClipboardJS('.copy-button', {
                text: function (trigger) {
                    var content = $(event.target).parent()[0].innerText;
                    return content
                }
            });

            clipboard.on('success', function (e) {
                var term_element = $(event.target).parent()[0];
                var new_button = document.createElement("button")
                new_button.classList.add("copy-complete")
                term_element.appendChild(new_button)
                e.clearSelection();
            });

            var clipboard
        });
    </script>
    {%- endblock scripts %}
    {%- endblock html %}

</html>
{% endblock doc -%}
