{% extends "base_cisco.html" %}
{% from "macros.html" import file, warn, info, cmd_blk_end, cmd_blk_start, term_end, topxterm, term_start, end_of_page,top_instance, copythis %}
{% block content %}
{% set step =  0 %}
{% set innerstep =  0 %}


<div class="section_header">
    <div class="title">CCP Tenant Cluster</div>
    <div class="title_section">Deployment</div>
</div>
{{ html_for_step_status|safe }}

<h1>CCP Lab Toplogy</h1>
<p>
    For this lab each pod has admin access to the common CCP control plane
    cluster which will be used to deploy the tenant clusters.
</p>
<img src="/lab/imgman/pod/{{ data.pod_id }}/id/991" class="img-responsive">

<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Copy your public key from the jumphost</h3>
<p>SSH using putty to your jumphost at IP address -<b>{{data.pod_master_ip}}</b> using the following credentials </p>
<br>Username: {{data.vmware_cred_username}}<br>
Password: C1sco123

<p>Type <b>'yes'</b> if prompted with ssh key validation message; we use the public key for authentication to CCP tenant nodes</p>
<p>Click <b>'Copy'</b> on the far right to copy the command into your clipboard</p>
<div class="fancy-terminal">
<pre class="command-line language-bash" data-prompt="{{ data.master_prompt}}">
<code class="language-bash">
ssh-keygen -t ecdsa -N '' -f ~/.ssh/id_ecdsa <<< y
</code>
</pre>
</div>
<p>The output you see should be similar to the image as shown below</p>
<img src="/lab/static/images/ccp/ccp5.png" class="img-responsive img-shadow">
<p>Display the public key using 'cat'</p>
<div class="fancy-terminal">
<pre class="command-line language-bash" data-prompt="{{ data.master_prompt}}">
<code class="language-bash">
cat ~/.ssh/id_ecdsa.pub
</code>
</pre>
</div>
<p><b>Hightlight the key from "ecdsa-sha2..... to ... "=" sign as show in the image below;<br>Open Notepad, and paste it for later use"</b></p>
<img src="/lab/static/images/ccp/ccp6.png" class="img-responsive img-shadow">

<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Connect to CCP admin console</h3>
<p>
    You will need to point the browser on your lab laptop  to the CCP admin website in this lab. Using the same
    Chrome browser that you are using to read this guide, go to the URL:
     <a href="http://10.139.13.50/ver/3/clusters" target="_blank">CCP Admin</a>
</p>
<p>Ignore/accept the invalid SSL certificate</p>
<p>The credentials for CCP are:</p>
<ul>
    <li>
        User ID: admin
    </li>
    <li>
        Password: admin
    </li>

</ul>
<img src="/lab/static/images/ccp/ccp_01.png" class="img-responsive img-shadow">



<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Create new cluster by clicking on 'NEW CLUSTER'</h3>
<p>
Make sure that you are using 'VERSION3' and are using vSphere</p>
<img src="/lab/static/images/ccp/ccp1.png" class="img-responsive img-shadow">



<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Create a new '{{data.apic_stdnt_uname}}' Cluster</h3>
<p>
    Infrastructure provider - vSphere; in production env, you might have several.
    </p>
    <p>Kubernetes Cluster Name - '{{data.apic_stdnt_uname}}' (user defined)</p>
    <p>ACI CNI profile - 'cloud-aci' which contains ACI specific settings</p>

<img src="/lab/imgman/pod/{{ data.pod_id }}/id/8" class="img-responsive">
<p>Click 'NEXT'</p>
<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Fill in the provider details</h3>
<p>This page is for vCenter specific details as shown, pick '{{data.apic_stdnt_uname}}' as your resource pool</p>
<img src="/lab/imgman/pod/{{ data.pod_id }}/id/13" class="img-responsive">
<<b>Click NEXT</b>
<!--
##############################################################################################################################
Step {% set step = step +  1 %}
##############################################################################################################################
-->
<h3>Step {{ step }} - Fill in your Master/Node specific details</h3>
<p>
Please chose only 1 Master and 1 Workers in order to reduce load on the lab equipment. <br>
Use the ssh key from Step 1 <br>
We will use a local Harbor registry to expedite App installaton</p>
<p>{{copythis(data.pod_cidr)}} <br> <b>^^^ ROUTABLE CIDR ^^^</b></p>
<p>{{copythis('10.101.128.101')}} <br> <b>^^^ NTP SERVER ^^^</b></p>
<p>
{{copythis('10.139.12.210')}}  <br> <b>^^INSECURE REGISTRIES^^</b>
</p>
<img src="/lab/imgman/pod/{{ data.pod_id }}/id/9" class="img-responsive">
<p>Input NTP and Registry as shown below (At least one entry for NTP)</p>
<img src="/lab/static/images/ccp/ccp7.png" class="img-responsive img-shadow">
<p>Click NEXT, and FINISH</p>

{{ end_of_page(page_position,data) }}
{% endblock %}
